{
	"name": "esCircuit",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "esFunctions"
		},
		{
			"eventType": "variable",
			"name": "speed",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 130630894789800
		},
		{
			"eventType": "comment",
			"text": "Mobile"
		},
		{
			"eventType": "variable",
			"name": "breaking",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 141399026250929
		},
		{
			"eventType": "variable",
			"name": "turning",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 906585161236157
		},
		{
			"eventType": "comment",
			"text": "Ai"
		},
		{
			"eventType": "variable",
			"name": "speed2",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 374505489851136
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 539924737511021
				}
			],
			"actions": [
				{
					"callFunction": "pins",
					"sid": 492901620457917
				},
				{
					"callFunction": "mapping",
					"sid": 880930684762371
				},
				{
					"callFunction": "prepareGamePlayer",
					"sid": 298718068057908
				},
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 729244319230945,
					"parameters": {
						"seconds": "2"
					}
				},
				{
					"callFunction": "prepareAI",
					"sid": 712992378788208
				}
			],
			"sid": 155928672402841
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-tick",
					"objectClass": "System",
					"sid": 248432583840476
				}
			],
			"actions": [
				{
					"id": "look-at-position",
					"objectClass": "3DCamera",
					"sid": 812012743467080,
					"disabled": true,
					"parameters": {
						"cam-x": "cameraPosition.X",
						"cam-y": "cameraPosition.Y",
						"cam-z": "1.5",
						"look-x": "player.X",
						"look-y": "player.Y",
						"look-z": "0.5",
						"up-x": "0",
						"up-y": "0",
						"up-z": "1"
					}
				},
				{
					"id": "look-at-position",
					"objectClass": "3DCamera",
					"sid": 717497818724082,
					"parameters": {
						"cam-x": "cameraPosition.X",
						"cam-y": "cameraPosition.Y",
						"cam-z": "1.5",
						"look-x": "enemy.X",
						"look-y": "enemy.Y",
						"look-z": "0.5",
						"up-x": "0",
						"up-y": "0",
						"up-z": "1"
					}
				}
			],
			"sid": 745152087266380
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Movement",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 437804826432745
						}
					],
					"actions": [
						{
							"id": "set-angle",
							"objectClass": "playerSprite",
							"sid": 976740279814736,
							"parameters": {
								"angle": "player.Angle"
							}
						}
					],
					"sid": 931779960820935,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "player",
									"sid": 221247348261521,
									"parameters": {
										"object": "circuitF"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "playerSprite",
									"sid": 292000894729754,
									"parameters": {
										"x": "round(player.X)",
										"y": "round(player.Y)"
									}
								}
							],
							"sid": 767360671955366
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 183768742242517
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "playerSprite",
									"sid": 531993510551473,
									"parameters": {
										"x": "player.X",
										"y": "player.Y"
									}
								}
							],
							"sid": 688771691235686
						}
					]
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "PC",
					"description": "",
					"isActiveOnStart": false,
					"children": [
						{
							"eventType": "comment",
							"text": "Forward"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 904973360666877,
									"parameters": {
										"key": 38
									}
								},
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 147323506155952,
									"parameters": {
										"key": 39
									},
									"isInverted": true
								},
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 646603188701518,
									"parameters": {
										"key": 37
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"callFunction": "Controlls",
									"sid": 844176915659875,
									"parameters": [
										"\"forward\""
									]
								}
							],
							"sid": 885827546257650
						},
						{
							"eventType": "comment",
							"text": "Right"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 836609458828776
								}
							],
							"actions": [],
							"sid": 567003793339927,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 747990065536072,
											"parameters": {
												"key": 38
											}
										},
										{
											"id": "key-is-down",
											"objectClass": "Keyboard",
											"sid": 186105693209068,
											"parameters": {
												"key": 39
											}
										}
									],
									"actions": [
										{
											"callFunction": "Controlls",
											"sid": 508947789572366,
											"parameters": [
												"\"right\""
											]
										}
									],
									"sid": 889246088542519
								},
								{
									"eventType": "comment",
									"text": "Left"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 399706695386754
										}
									],
									"actions": [],
									"sid": 594290636045347,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "key-is-down",
													"objectClass": "Keyboard",
													"sid": 752043655547591,
													"parameters": {
														"key": 38
													}
												},
												{
													"id": "key-is-down",
													"objectClass": "Keyboard",
													"sid": 582503549168765,
													"parameters": {
														"key": 37
													}
												}
											],
											"actions": [
												{
													"callFunction": "Controlls",
													"sid": 142990831617372,
													"parameters": [
														"\"left\""
													]
												}
											],
											"sid": 363118136854569
										}
									]
								}
							]
						}
					],
					"sid": 431218747862280
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Mobile",
					"description": "",
					"isActiveOnStart": false,
					"children": [
						{
							"eventType": "comment",
							"text": "Forward - Breaking - Reverse"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 778773091295939
								}
							],
							"actions": [],
							"sid": 454517482846176,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 429699791173381,
											"parameters": {
												"variable": "breaking"
											}
										}
									],
									"actions": [],
									"sid": 692052224135570,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-speed",
													"objectClass": "player",
													"sid": 664234628567554,
													"behaviorType": "Car",
													"parameters": {
														"comparison": 4,
														"speed": "0"
													}
												}
											],
											"actions": [
												{
													"id": "simulate-control",
													"objectClass": "player",
													"sid": 795538774870550,
													"behaviorType": "Car",
													"parameters": {
														"control": "brake"
													}
												}
											],
											"sid": 247456280058163
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 365141727521179
										}
									],
									"actions": [
										{
											"id": "simulate-control",
											"objectClass": "player",
											"sid": 672889656714693,
											"behaviorType": "Car",
											"parameters": {
												"control": "accelerate"
											}
										}
									],
									"sid": 442439175233817
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Turning - Sprite"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-in-touch",
									"objectClass": "Touch",
									"sid": 877603519302435
								}
							],
							"actions": [
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 369351277798074,
									"parameters": {
										"type": "log",
										"message": "\"X: \" & Touch.AbsoluteX & \" Y: \" & Touch.AbsoluteY"
									}
								}
							],
							"sid": 846692566248947,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 669953833399181,
											"parameters": {
												"first-value": "Touch.AbsoluteY",
												"comparison": 2,
												"second-value": "250"
											}
										}
									],
									"actions": [],
									"sid": 815086376731363,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 484745068694828,
													"parameters": {
														"first-value": "Touch.AbsoluteX",
														"comparison": 2,
														"second-value": "280"
													}
												}
											],
											"actions": [
												{
													"id": "simulate-control",
													"objectClass": "player",
													"sid": 458641734957908,
													"behaviorType": "Car",
													"parameters": {
														"control": "steer-left"
													}
												},
												{
													"callFunction": "Controlls",
													"sid": 795279695301685,
													"parameters": [
														"\"left\""
													]
												}
											],
											"sid": 561732329303010
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 175686197013358
												}
											],
											"actions": [
												{
													"id": "simulate-control",
													"objectClass": "player",
													"sid": 373585961850743,
													"behaviorType": "Car",
													"parameters": {
														"control": "steer-right"
													}
												},
												{
													"callFunction": "Controlls",
													"sid": 253144770279486,
													"parameters": [
														"\"right\""
													]
												}
											],
											"sid": 256287050322310
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 446203962311404
										}
									],
									"actions": [
										{
											"id": "toggle-boolean-eventvar",
											"objectClass": "System",
											"sid": 135147483959555,
											"parameters": {
												"variable": "breaking"
											}
										}
									],
									"sid": 863336207206826
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 691304145234339
								}
							],
							"actions": [
								{
									"callFunction": "Controlls",
									"sid": 392798608726179,
									"parameters": [
										"\"forward\""
									]
								}
							],
							"sid": 592214285844961
						}
					],
					"sid": 885779845511549
				}
			],
			"sid": 696390232506983
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Items",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Player"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "coins",
							"sid": 438489145501421,
							"parameters": {
								"object": "player"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "coins",
							"sid": 882654218322048
						}
					],
					"sid": 365714333052515
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "powerItems",
							"sid": 899842645374628,
							"parameters": {
								"object": "player"
							}
						}
					],
					"actions": [],
					"sid": 180219139805183,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-animation-frame",
									"objectClass": "powerItems",
									"sid": 362809033124176,
									"parameters": {
										"comparison": 0,
										"number": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation-frame",
									"objectClass": "powerItems",
									"sid": 956064215451854,
									"parameters": {
										"frame-number": "1"
									}
								},
								{
									"callFunction": "getItems",
									"sid": 860979856477782
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 344327692223443,
									"parameters": {
										"seconds": "25"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "powerItems",
									"sid": 562978937104931,
									"parameters": {
										"frame-number": "0"
									}
								}
							],
							"sid": 292580865410964
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Enemy"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "coins",
							"sid": 684430033458131,
							"parameters": {
								"object": "enemy"
							}
						}
					],
					"actions": [
						{
							"id": "destroy",
							"objectClass": "coins",
							"sid": 888405696434892
						}
					],
					"sid": 922423909587207
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "powerItems",
							"sid": 778739489358873,
							"parameters": {
								"object": "enemy"
							}
						}
					],
					"actions": [],
					"sid": 845658806239536,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-animation-frame",
									"objectClass": "powerItems",
									"sid": 895926677988162,
									"parameters": {
										"comparison": 0,
										"number": "0"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation-frame",
									"objectClass": "powerItems",
									"sid": 148949488772558,
									"parameters": {
										"frame-number": "1"
									}
								},
								{
									"callFunction": "getItems",
									"sid": 226753797193830
								},
								{
									"id": "wait",
									"objectClass": "System",
									"sid": 850803560311039,
									"parameters": {
										"seconds": "25"
									}
								},
								{
									"id": "set-animation-frame",
									"objectClass": "powerItems",
									"sid": 690633581806431,
									"parameters": {
										"frame-number": "0"
									}
								}
							],
							"sid": 967880517339939
						}
					]
				}
			],
			"sid": 362959751249819
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "AI",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Out of street"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 669132271192069
						}
					],
					"actions": [
						{
							"id": "set-angle",
							"objectClass": "enemySprite",
							"sid": 244852189167207,
							"parameters": {
								"angle": "enemy.Angle"
							}
						}
					],
					"sid": 504021684020408,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-overlapping-another-object",
									"objectClass": "enemy",
									"sid": 395394730737536,
									"parameters": {
										"object": "circuitF"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "enemySprite",
									"sid": 129585712266164,
									"parameters": {
										"x": "round(enemy.X)",
										"y": "round(enemy.Y)"
									}
								},
								{
									"id": "set-speed",
									"objectClass": "enemy",
									"sid": 211647916201364,
									"behaviorType": "Pathfinding",
									"parameters": {
										"speed": "50"
									}
								}
							],
							"sid": 182061273174430
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 558125641384813
								}
							],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "enemySprite",
									"sid": 484933591579114,
									"parameters": {
										"x": "enemy.X",
										"y": "enemy.Y"
									}
								}
							],
							"sid": 203722023732658,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "sprint",
											"sid": 251353626094512,
											"parameters": {
												"object": "enemy"
											}
										}
									],
									"actions": [
										{
											"id": "set-acceleration",
											"objectClass": "enemy",
											"sid": 343668013501397,
											"behaviorType": "Pathfinding",
											"parameters": {
												"acceleration": "sprint.newAcceleration"
											}
										},
										{
											"id": "set-max-speed",
											"objectClass": "enemy",
											"sid": 136159287620273,
											"behaviorType": "Pathfinding",
											"parameters": {
												"speed": "sprint.newVelocity"
											}
										}
									],
									"sid": 195524731868092
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 756516740116016
										}
									],
									"actions": [
										{
											"id": "set-acceleration",
											"objectClass": "enemy",
											"sid": 494315411125250,
											"behaviorType": "Pathfinding",
											"parameters": {
												"acceleration": "30"
											}
										},
										{
											"id": "set-max-speed",
											"objectClass": "player",
											"sid": 964665871803151,
											"behaviorType": "Car",
											"parameters": {
												"max-speed": "150"
											}
										}
									],
									"sid": 669310050150864
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Movement"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-path-found",
							"objectClass": "enemy",
							"sid": 157472755329452,
							"behaviorType": "Pathfinding"
						}
					],
					"actions": [
						{
							"id": "move-along-path",
							"objectClass": "enemy",
							"sid": 260416306287472,
							"behaviorType": "Pathfinding"
						}
					],
					"sid": 155352143125234
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-collision-with-another-object",
							"objectClass": "enemy",
							"sid": 416642223895981,
							"parameters": {
								"object": "AIPath"
							}
						}
					],
					"actions": [],
					"sid": 651361379489735,
					"children": [
						{
							"eventType": "variable",
							"name": "iidNextObject",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 417868728640751
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 104449888534282,
									"parameters": {
										"variable": "iidNextObject",
										"value": "AIPath.IID + 1"
									}
								}
							],
							"sid": 973166549785637
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 967786170675739,
									"parameters": {
										"first-value": "AIPath.id + 1",
										"comparison": 0,
										"second-value": "AIPath.Count"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 748376228874323,
									"parameters": {
										"variable": "iidNextObject",
										"value": "0"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 858094001523282,
									"parameters": {
										"instance-variable": "nextX",
										"value": "1276.094722"
									}
								},
								{
									"id": "set-instvar-value",
									"objectClass": "enemy",
									"sid": 578762972039270,
									"parameters": {
										"instance-variable": "nextY",
										"value": "445.153847"
									}
								},
								{
									"id": "find-path",
									"objectClass": "enemy",
									"sid": 287666133892767,
									"behaviorType": "Pathfinding",
									"parameters": {
										"x": "Self.nextX",
										"y": "Self.nextY"
									}
								}
							],
							"sid": 200287664963089
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 330601348251943
								},
								{
									"id": "pick-all",
									"objectClass": "System",
									"sid": 774779089706276,
									"parameters": {
										"object": "AIPath"
									}
								}
							],
							"actions": [],
							"sid": 576456687272563,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-nth-instance",
											"objectClass": "System",
											"sid": 976758564956001,
											"parameters": {
												"object": "AIPath",
												"instance": "iidNextObject"
											}
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "AIPath",
											"sid": 499881790234638,
											"disabled": true
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 210088922460787,
											"parameters": {
												"instance-variable": "nextX",
												"value": "AIPath.X"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "enemy",
											"sid": 586102206148946,
											"parameters": {
												"instance-variable": "nextY",
												"value": "AIPath.Y"
											}
										},
										{
											"id": "find-path",
											"objectClass": "enemy",
											"sid": 512397890611747,
											"behaviorType": "Pathfinding",
											"parameters": {
												"x": "Self.nextX",
												"y": "Self.nextY"
											}
										}
									],
									"sid": 901966049135219
								}
							]
						}
					]
				}
			],
			"sid": 923815920421045
		},
		{
			"eventType": "comment",
			"text": "LOGs"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-tick",
					"objectClass": "System",
					"sid": 463015494674591
				}
			],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 390575273915704,
					"parameters": {
						"variable": "speed",
						"value": "player.Car.Speed"
					}
				}
			],
			"sid": 475059134088938
		}
	],
	"sid": 672380237338827
}